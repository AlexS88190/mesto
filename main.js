(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=t((function e(t,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_getTemplate",(function(){return document.querySelector(i._cardSelector).content.querySelector(".elements__item").cloneNode(!0)})),n(this,"generateCard",(function(){return i._initElements(),i._addEventListener(),i._linkCard.src=i._link,i._linkCard.alt=i._title,i._nameCard.textContent=i._title,i._cardElement})),n(this,"_removeCard",(function(e){i._cardElement.remove(),i._destroyElements()})),n(this,"_destroyElements",(function(){i._trashButton=null,i._cardElement=null,i._likeButton=null,i._nameCard=null,i._linkCard=null})),n(this,"_initElements",(function(){i._cardElement=i._getTemplate(),i._linkCard=i._cardElement.querySelector(".elements__image"),i._nameCard=i._cardElement.querySelector(".elements__title"),i._trashButton=i._cardElement.querySelector(".elements__trash"),i._likeButton=i._cardElement.querySelector(".elements__like-button")})),n(this,"_likeCard",(function(e){i._likeButton.classList.toggle("elements__like-button_active")})),n(this,"_handleOpenZoomPopup",(function(e){i._openZoomPopup(i._title,i._link)})),n(this,"_addEventListener",(function(){i._trashButton.addEventListener("click",i._removeCard),i._likeButton.addEventListener("click",i._likeCard),i._linkCard.addEventListener("click",i._handleOpenZoomPopup)})),this._title=t.name,this._link=t.link,this._cardSelector=r,this._openZoomPopup=o}));function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"enableValidation",(function(){r._formElement.addEventListener("submit",(function(e){e.preventDefault()})),r._setEventListeners()})),i(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._updateInputErrors(e),r.toggleButtonState()}))}))})),i(this,"_updateInputErrors",(function(e){r._isInputValid(e)?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),i(this,"_hideInputError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._selectors.inputErrorClass),t.classList.remove(r._selectors.errorClass),t.textContent=""})),i(this,"_showInputError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._selectors.inputErrorClass),n.textContent=t,n.classList.add(r._selectors.errorClass)})),i(this,"toggleButtonState",(function(){r._formElement.checkValidity()?(r._buttonElement.classList.remove(r._selectors.inactiveButtonClass),r._buttonElement.removeAttribute("disabled")):(r._buttonElement.classList.add(r._selectors.inactiveButtonClass),r._buttonElement.setAttribute("disabled","disabled"))})),i(this,"_isInputValid",(function(e){return e.validity.valid})),this._selectors=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._selectors.inputSelector)),this._buttonElement=this._formElement.querySelector(this._selectors.submitButtonSelector)}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){var n=e._renderer(t);e.addItem(n)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=s((function e(t){var n=this,r=t.profileTitleSelector,o=t.profileSubTitleSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"getUserInfo",(function(){return{profileTitle:n._profileTitleElement.textContent,profileSubTitle:n._profileSubTitleElement.textContent}})),p(this,"setUserInfo",(function(e){var t=e.profileTitle,r=e.profileSubTitle;n._profileTitleElement.textContent=t,n._profileSubTitleElement.textContent=r})),this._profileTitleElement=document.querySelector(r),this._profileSubTitleElement=document.querySelector(o)}));function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._handleClosePopup=this._handleClosePopup.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._handleClosePopup)}},{key:"_handleClosePopup",value:function(e){(e.target.classList.contains("popup__close-button")||e.target.classList.contains("popup"))&&this.close()}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function E(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e))._popupZoomImage=t._popup.querySelector(".popup__image"),t._popupZoomTitle=t._popup.querySelector(".popup__zoom-title"),t}return t=l,(n=[{key:"open",value:function(e,t){b(w(l.prototype),"open",this).call(this),this._popupZoomImage.src=t,this._popupZoomImage.alt=e,this._popupZoomTitle.textContent=e}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(d);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function P(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=i.call(this,e))._form=n._popup.querySelector(".popup__form"),n._submitCallback=t,n._handleSubmitCallback=n._handleSubmitCallback.bind(L(n)),n}return t=l,(n=[{key:"setEventListeners",value:function(){C(T(l.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._handleSubmitCallback)}},{key:"_handleSubmitCallback",value:function(e){e.preventDefault(),this._submitCallback(this._getInputValues())}},{key:"_getInputValues",value:function(){var e={};return this._popup.querySelectorAll(".popup__input").forEach((function(t){e[t.name]=t.value})),e}},{key:"close",value:function(){C(T(l.prototype),"close",this).call(this),this._form.reset()}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(d),I=new a({items:[{name:"Palm Jumeirah, Dubai",link:"https://lilastourism.com/wp-content/uploads/2017/11/skydive-dubai1.jpg"},{name:"Waialua, Hawaii",link:"https://live.staticflickr.com/5131/5447473435_2567ba3776_b.jpg"},{name:"Interlaken, Switzerland",link:"https://cantina-caverna.ch/wp-content/uploads/2017/08/visit_interlaken_lungern_view.jpg"},{name:"Majlis al Jinn, Oman",link:"https://www.getlostmagazine.com/wp-content/uploads/2016/05/GL35-OMAN-SS-JINN_CAVE-1500x900.jpg"},{name:"Stratosphere",link:"https://avatars.mds.yandex.net/get-zen_doc/1900011/pub_5dd9914ca4655250ff59d1c3_5debb1325d636200ad8366c6/scale_1200"},{name:"Chamonix, Switzerland",link:"https://www.orangesmile.com/common/img_cities_original/chamonix-mont-blanc--1418045-2.jpg"}],renderer:K},".elements__list"),B=new f({profileTitleSelector:".profile__title",profileSubTitleSelector:".profile__subtitle"}),R=new g(".popup_type_zoom");R.setEventListeners();var x=new q(".popup_type_place",(function(e){var t;t=K({name:e.place,link:e.link}),I.addItem(t),x.close()}));x.setEventListeners();var V=new q(".popup_type_profile",(function(e){B.setUserInfo({profileTitle:e.name_profile,profileSubTitle:e.about_profile}),V.close()}));V.setEventListeners();var Z=document.querySelector(".popup_type_profile"),A=document.querySelector(".popup_type_place"),D=Z.querySelector(".popup__form_profile"),z=D.querySelector(".popup__input_type_name"),N=D.querySelector(".popup__input_type_about"),U=A.querySelector(".popup__form_place"),J={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},M=document.querySelector(".profile__edit-button"),G=document.querySelector(".profile__add-button");function H(e,t){R.open(e,t)}var W=new l(J,D),F=new l(J,U);function K(e){return new r(e,".card-template",H).generateCard()}I.renderItems(),M.addEventListener("click",(function(e){var t=B.getUserInfo();z.value=t.profileTitle,N.value=t.profileSubTitle,W.resetValidation(),V.open()})),G.addEventListener("click",(function(e){F.toggleButtonState(),x.open()})),W.enableValidation(),F.enableValidation()})();